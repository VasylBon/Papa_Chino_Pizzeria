(()=>{"use strict";const e=()=>{const e=window.location.href,t=document.querySelectorAll(".menu__link"),n=document.querySelectorAll(".ua"),s=document.querySelectorAll(".en");document.querySelectorAll(".language").forEach((e=>{e.addEventListener("click",(()=>{e.classList.contains("active")||localStorage.clear()}))})),t.forEach((t=>{t.href===e?t.classList.add("active"):t.classList.remove("active")})),e.includes("en")?s.forEach((e=>{e.classList.add("active")})):n.forEach((e=>{e.classList.add("active")}))},t=e;document.addEventListener("DOMContentLoaded",e),window.addEventListener("popstate",e);const n=()=>{const e=document.querySelector(".cart__fill"),t=document.documentElement.getAttribute("lang"),s="ua"===t?"грн":"UAH";e.innerHTML="";for(let t in localStorage)if(localStorage.hasOwnProperty(t)&&t.startsWith("good")){let n=JSON.parse(localStorage.getItem(t)),a=document.createElement("div");a.classList.add("product__details","add-product"),a.innerHTML=`\n            <div class="add-product__main">\n            <img\n                src="${n.image}"\n                alt="product_image"\n            />\n            <div class="add-product__info">\n                <h3 class="info__name">${n.title}</h3>\n                <div class="info__size">${n.size}</div>\n            </div>\n        </div>\n        <div class="add-product__amount">\n            <p class="plus__amount">+</p>\n            <input\n                class="amount"\n                type="text"\n                value="${n.count}"\n            />\n            <p class="minus__amount">—</p>\n        </div>\n        <div class="add-product__price">${n.price} ${s}</div>\n        <div class="add-product__sum">${n.count*n.price} ${s}</div>\n        <div class="add-product__delete">\n            <a\n                class="fa fa-times del-pos"\n                aria-hidden="true"\n            ></a>\n        </div>`,e.appendChild(a)}const a=document.querySelector(".product__details"),o=document.querySelectorAll(".plus__amount"),c=document.querySelectorAll(".minus__amount"),l=document.querySelectorAll(".add-product__price"),r=document.querySelectorAll(".add-product__sum"),i=document.querySelectorAll(".sum__number"),d=document.querySelectorAll(".del-pos"),u=document.querySelector(".btn__order");function m(){let e=0;r?(r.forEach((t=>{e+=parseInt(t.textContent.replace(/\D/g,""),10)})),i.forEach((t=>{t.textContent=e}))):i.forEach((e=>{e.textContent=0}))}function _(e,t){return`${e*t} ${s}`}function p(e){const t=e.closest(".add-product"),n=t.querySelector(".info__name").textContent+t.querySelector(".info__size").textContent;let s=JSON.parse(localStorage.getItem(`good ${n}`));s.count=parseInt(e.value),localStorage.setItem(`good ${n}`,JSON.stringify(s))}if(a)u.classList.remove("close");else{let n=document.createElement("div");n.classList.add("product__info"),n.innerHTML="ua"===t?"Ваша корзина порожня!<br/>Щоб оформити замовлення, додайте товар до корзини!":"Your cart is empty! <br/> To place an order, add the item to the cart!",u.classList.add("close"),e.appendChild(n)}o.forEach(((e,t)=>{e.addEventListener("click",(()=>{const n=e.nextElementSibling;let s=parseInt(n.value),a=parseInt(l[t].textContent.replace(/\D/g,""),10);n.value=++s,r[t].textContent=_(s,a),m(),p(n)}))})),c.forEach(((e,t)=>{e.addEventListener("click",(()=>{const n=e.previousElementSibling;let s=parseInt(n.value),a=parseInt(l[t].textContent.replace(/\D/g,""),10);s>1&&(n.value=--s,r[t].textContent=_(s,a),m(),p(n))}))})),d.forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".add-product"),s=t.querySelector(".info__name").textContent+t.querySelector(".info__size").textContent;return localStorage.removeItem(`good ${s}`),n()}))})),m()},s=n,a=(e,t)=>{const n=e=>{e.style.background="rgba(148, 30, 30, 0.06)",e.style.border="2px solid rgb(148, 30, 30)",e.style.outline="none",t.style.display="block"},s=e=>{e.style.background="rgba(54, 158, 59, 0.06)",e.style.border="2px solid rgb(54, 158, 59)",e.style.outline="none",t.style.display="none"};switch(e.getAttribute("id")){case"feedback-name":case"contact-name":case"delivery-name":return e.value.match(/\d/g)||""===e.value.trim()?(n(e),!1):(s(e),!0);case"feedback-phone":case"contact-phone":case"delivery-phone":return e.value.match(/[^\d+]/g)||e.value.length<8||e.value.length>15||""===e.value.trim()?(n(e),!1):(s(e),!0);case"feedback-address":case"delivery-location":return e.value.length<3?(n(e),!1):(s(e),!0);case"feedback-comment":case"contact-question":return e.value.length<=10||""===e.value.trim()?(n(e),!1):(s(e),!0);case"contact-email":return e.value.includes("@")&&e.value.includes(".")&&""!==e.value.trim()?(s(e),!0):(n(e),!1);case"delivery-comment":return s(e),!0}},o=()=>{const e=document.querySelector("#contactForm");if(e){const t=document.querySelectorAll("input, textarea"),n=document.querySelector(".error_message"),s=document.querySelector("#contact-submit"),o=document.querySelector(".pop-up__status");let c=null;class l{constructor(e){this.input=document.querySelector(`#${e}`),this.valid=!1,this.input.addEventListener("input",(()=>{this.valid=a(this.input,n),i()}))}}const r={name:new l("contact-name"),phone:new l("contact-phone"),email:new l("contact-email"),question:new l("contact-question")};function i(){Object.values(r).every((e=>e.valid))?s.style.display="block":s.style.display="none"}i();const d={loading:'\n            <div class="pop-up__thanks">\n                <img class="thanks__loading" src="img/loading.gif" alt="loading" />\n                <h2 class="thanks__text">\n                    Відправлення даних...\n                </h2>\n            </div>\n            ',success:'\n            <div class="pop-up__thanks">\n                <img class="thanks__smile" src="img/icons/happy_smile.svg" alt="smile" />\n                <h2 class="thanks__text">\n                    Дякуємо за Ваше запитання! Ми відповімо Вам в найближчий час!\n                </h2>\n                <button class="thanks__btn">ЗРОЗУМІЛО</button>\n            </div>\n        ',error:'\n            <div class="pop-up__thanks">\n                <img class="thanks__smile" src="img/main/sad_smile.svg" alt="smile" />\n                <h2 class="thanks__text">\n                    Щось пішло не так! Повторіть спробу.\n                </h2>\n                <button class="thanks__btn">Повернутись</button>\n            </div>\n        ',loading_en:'\n            <div class="pop-up__thanks">\n                <img class="thanks__loading" src="img/loading.gif" alt="loading" />\n                <h2 class="thanks__text">\n                    Sending data ...\n                </h2>\n            </div>\n            ',success_en:'\n            <div class="pop-up__thanks">\n                <img class="thanks__smile" src="img/icons/happy_smile.svg" alt="smile" />\n                <h2 class="thanks__text">\n                    Thank you for your question! We will answer you in the near future!\n                </h2>\n                <button class="thanks__btn">UNDERSTAND</button>\n            </div>\n        ',error_en:'\n            <div class="pop-up__thanks">\n                <img class="thanks__smile" src="img/main/sad_smile.svg" alt="smile" />\n                <h2 class="thanks__text">\n                    Something went wrong! Try again.\n                </h2>\n                <button class="thanks__btn">RETURN</button>\n            </div>\n        '};e.addEventListener("submit",(async n=>{n.preventDefault();const a=document.documentElement.lang,l=document.createElement("div");l.classList.add("pop-up__body"),l.innerHTML="ua"===a?d.loading:d.loading_en,o.append(l),o.classList.remove("close");try{(await fetch("../server/submit_question.html",{method:"POST",body:new FormData(e)})).ok?(l.innerHTML="ua"===a?d.success:d.success_en,e.reset(),t.forEach((e=>{e.style.background="#fff",e.style.border="2px solid #941e1e",s.style.display="none"}))):l.innerHTML="ua"===a?d.error:d.error_en,c=o.querySelector(".thanks__btn"),c.addEventListener("click",(()=>{o.classList.add("close")}))}catch(e){l.innerHTML="ua"===a?d.error:d.error_en}}))}},c=()=>{const e=document.querySelector(".leave__feedback"),t=document.querySelector(".pop-up__feedback"),n=document.querySelector(".pop-up__content"),s=document.querySelector("#feedback-info"),o=document.querySelector(".pop-up__close");if(t){const c=document.querySelectorAll("input, textarea"),l=document.querySelector(".error_message"),r=document.querySelector("#feedback-submit"),i=t.querySelector(".pop-up__thanks");let d=null;e.addEventListener("click",(()=>{t.classList.remove("close"),n.classList.remove("close")})),o.addEventListener("click",(e=>{e.preventDefault(),n.classList.add("close"),t.classList.add("close")})),document.addEventListener("keydown",(e=>{"Escape"!==e.code||n.classList.contains("close")||(n.classList.add("close"),t.classList.add("close"))}));class u{constructor(e){this.input=document.querySelector(`#${e}`),this.valid=!1,this.input.addEventListener("input",(()=>{this.valid=a(this.input,l),v()}))}}const m={name:new u("feedback-name"),phone:new u("feedback-phone"),address:new u("feedback-address"),comment:new u("feedback-comment")},_=document.querySelectorAll(".far");let p=0,g=0;function h(){_.forEach(((e,t)=>{e.classList.remove("fas"),e.classList.contains("far")||e.classList.add("far")}))}function y(e){_.forEach(((t,n)=>{n<e&&t.classList.add("fas")}))}function v(){Object.values(m).every((e=>e.valid))&&p>0?r.style.display="block":r.style.display="none"}_.forEach(((e,t)=>{e.addEventListener("click",(()=>{p=t+1,h(),y(p),v()})),e.addEventListener("mouseover",(()=>{g=t+1,g>p&&(h(),y(g))})),e.addEventListener("mouseout",(()=>{h(),y(p)}))})),v();const b={loading:'\n                <img class="thanks__loading" src="img/loading.gif" alt="loading" />\n                <h2 class="thanks__text">\n                    Відправлення даних...\n                </h2>\n            ',success:'\n            <img class="smile" src="img/icons/happy_smile.svg" alt="smile" />\n            <h2 class="thanks__text">\n                Дякуємо за Ваш відгук!<br />\n                Нам важлива Ваша думка для покращення сервісу!\n            </h2>\n            <button class="thanks__btn">ЗРОЗУМІЛО</button>\n        ',error:'\n                <img class="thanks__smile" src="img/icons/sad_smile.svg" alt="smile" />\n                <h2 class="thanks__text">\n                    Щось пішло не так! Повторіть спробу.\n                </h2>\n                <button class="thanks__btn">Повернутись</button>\n        ',loading_en:'\n            <img class="thanks__loading" src="img/loading.gif" alt="loading" />\n            <h2 class="thanks__text">\n                Sending data...\n            </h2>\n            ',success_en:'\n            <img class="smile" src="img/icons/happy_smile.svg" alt="smile" />\n            <h2 class="thanks__text">\n                Thank you for your feedback!<br />\n                Your opinion is important to us to improve the service!\n            </h2>\n            <button class="thanks__btn">UNDERSTOOD</button>\n        ',error_en:'\n            <img class="thanks__smile" src="img/icons/sad_smile.svg" alt="smile" />\n            <h2 class="thanks__text">\n                Something went wrong! Try again.\n            </h2>\n            <button class="thanks__btn">RETURN</button>\n        '};s.addEventListener("submit",(async e=>{e.preventDefault(),n.classList.add("close");const a=document.documentElement.lang,o=document.createElement("div");o.classList.add("pop-up__body"),o.innerHTML="ua"===a?b.loading:b.loading_en,i.append(o),i.classList.remove("close");const l=new Date,u=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")}`,m=new FormData(s);m.append("rate",p),m.append("date",u);try{200===(await fetch("../server/submit_feedback.html",{method:"POST",body:m})).status?(o.innerHTML="ua"===a?b.success:b.success_en,s.reset(),c.forEach((e=>{e.style.background="#fff",e.style.border="2px solid #941e1e",r.style.display="none"})),p=0):o.innerHTML="ua"===a?b.error:b.error_en,d=i.querySelector(".thanks__btn"),d.addEventListener("click",(()=>{i.classList.add("close"),t.classList.add("close")}))}catch(e){console.error("Error:",e)}}))}},l=()=>{const e=document.querySelector("#delivery-info"),t=document.querySelectorAll("input, textarea"),n=document.querySelector(".error_info"),s=document.querySelector(".btn__submit"),o=document.querySelector(".pop-up__body"),c=document.querySelector(".delivery__detail"),l=document.querySelector(".btn__order");let r=null;const i=document.querySelector(".sum__number"),d=document.querySelector(".delivery__sum-number"),u=document.querySelector(".total__sum-number"),m=document.querySelectorAll("input[name='deliveryType'");function _(){u.textContent=parseInt(i.textContent)+parseInt(d.textContent)}l.addEventListener("click",(()=>{_()})),m.forEach((e=>{e.addEventListener("change",(()=>{"Дотавка до дверей"===e.value||"door"===e.value?d.textContent="30":d.textContent="0",_()}))})),_();class p{constructor(e){this.input=document.querySelector(`#${e}`),this.valid=!1,this.input.addEventListener("input",(()=>{this.valid=a(this.input,n),h()}))}}const g={name:new p("delivery-name"),phone:new p("delivery-phone"),location:new p("delivery-location"),comment:new p("delivery-comment")};function h(){Object.values(g).every((e=>e.valid))?s.style.display="block":s.style.display="none"}h();const y='\n                <img class="thanks__loading" src="img/loading.gif" alt="loading" />\n                <h2 class="thanks__text">\n                    Оформлюємо замовлення...\n                </h2>\n            ',v='\n            <img class="smile" src="img/icons/happy_smile.svg" alt="smile" />\n            <h2 class="thanks__text">\n                Дякуємо за замовлення!<br />\n                В найближчий час наш менеджер зателефонує Вам!\n            </h2>\n            <button class="thanks__btn">НА ГОЛОВНУ</button>\n        ',b='\n                <img class="thanks__smile" src="img/icons/sad_smile.svg" alt="smile" />\n                <h2 class="thanks__text">\n                    Щось пішло не так! Повторіть спробу.\n                </h2>\n                <button class="thanks__btn">ПОВЕРНУТИСЯ</button>\n        ',f='\n            <img class="thanks__loading" src="img/loading.gif" alt="loading" />\n            <h2 class="thanks__text">\n                Place your order...\n            </h2>\n            ',k='\n            <img class="smile" src="img/icons/happy_smile.svg" alt="smile" />\n            <h2 class="thanks__text">\n                Thank you for your feedback!<br />\n                Your opinion is important to us to improve the service\n            </h2>\n            <button class="thanks__btn">MAIN PAGE</button>\n        ',S='\n            <img class="thanks__smile" src="img/icons/sad_smile.svg" alt="smile" />\n            <h2 class="thanks__text">\n                Thank you for your order!<br />\n                Our manager will contact you shortly!\n            </h2>\n            <button class="thanks__btn">RETURN</button>\n        ';e.addEventListener("submit",(async n=>{n.preventDefault();const a=document.documentElement.lang,l=document.createElement("div");l.classList.add("pop-up__body"),l.innerHTML="ua"===a?y:f,o.append(l),o.classList.remove("close");const i=new Date,d=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`,m=parseInt(u.textContent),_=new FormData(e);_.append("date",d),_.append("totalSum",m);try{200===(await fetch("../server/submit_order.html",{method:"POST",body:_})).status?(l.innerHTML="ua"===a?v:k,e.reset(),t.forEach((e=>{e.style.background="#fff",e.style.border="2px solid #941e1e",s.style.display="none"}))):l.innerHTML="ua"===a?b:S,localStorage.clear(),c.classList.toggle("close"),r=o.querySelector(".thanks__btn"),r.addEventListener("click",(()=>{const e="ua"===a?"index.html":"index_en.html";o.classList.add("close"),c.classList.add("close"),window.location.href=e}))}catch(e){console.error("Error:",e)}}))};window.addEventListener("DOMContentLoaded",(function(){!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),(()=>{const e=document.querySelector(".menu_icon");if(e){const t=document.querySelector(".header__menu");e.addEventListener("click",(n=>{document.body.classList.toggle("lock"),e.classList.toggle("open"),t.classList.toggle("open")}))}})(),new Swiper(".slide-content",{slidesPerView:3,initialSlide:1,fade:"true",centerSlide:"true",grabCursor:"true",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{320:{slidesPerView:1},767:{slidesPerView:2},1024:{slidesPerView:3}}}),t(),(()=>{const e=document.querySelectorAll(".small-size-button"),t=document.querySelectorAll(".big-size-button");e.forEach(((e,n)=>{e.addEventListener("click",(()=>{e.classList.add("want"),t[n].classList.remove("want")}))})),t.forEach(((t,n)=>{t.addEventListener("click",(()=>{t.classList.add("want"),e[n].classList.remove("want")}))}))})(),(()=>{const e=document.querySelector(".info__cart"),t=document.querySelector(".purchase"),n=document.querySelector(".cart__detail"),s=document.querySelectorAll(".btn__return"),a=document.querySelector(".btn__order"),o=document.querySelector(".delivery__detail");e.addEventListener("click",(e=>{e.preventDefault(),document.body.classList.toggle("lock"),t.classList.toggle("close"),n.classList.remove("close")})),s.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),n.classList.toggle("close"),document.body.classList.toggle("lock"),t.classList.toggle("close"),o.classList.contains("close")||o.classList.toggle("close")}))})),a.addEventListener("click",(()=>{n.classList.toggle("close"),o.classList.toggle("close")}))})(),(()=>{const e=document.querySelectorAll(".product_img"),t=document.querySelectorAll(".item-product__title"),n=document.querySelectorAll(".s-size"),a=document.querySelectorAll(".b-size"),o=document.querySelectorAll(".small-size-button"),c=document.querySelectorAll(".big-size-button"),l=document.querySelectorAll(".item_product-cart");s(),l.forEach(((l,r)=>{l.addEventListener("click",(()=>{const l=o[r].classList.contains("want")?n[r].textContent:a[r].textContent,i=o[r].classList.contains("want")?o[r].textContent:c[r].textContent,d={image:e[r].src.replace(/^.*?\/img/,"img"),title:t[r].textContent,size:l,price:parseInt(i.replace(/\D/g,""),10),count:1},u=localStorage.getItem("good "+t[r].textContent+l);if(u){const e=JSON.parse(u);e.count+=1,localStorage.setItem("good "+t[r].textContent+l,JSON.stringify(e))}else localStorage.setItem("good "+t[r].textContent+l,JSON.stringify(d));s()}))}))})(),o(),c(),l()}))})();